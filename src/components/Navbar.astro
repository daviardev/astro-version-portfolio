---
import Logo from './Logo.astro';

import ProfileLink from './ProfileLink.astro';

const pathName = new URL(Astro.request.url).pathname;
const currentPath = pathName.slice(1);
---

<header>
    <nav
        class='fixed w-full bg-[rgba(255,255,255,0.25)] backdrop-blur-[10px] z-20'
    >
        <div
            class='w-full ms-auto me-auto ps-4 pe-4 flex p-2 max-w-3xl flex-wrap justify-between'
        >
            <div class='flex items-center mr-5'>
                <h1
                    class='font-bold items-center text-2xl leading-[1.33] tracking-tighter'
                >
                    <Logo />
                </h1>
            </div>
            <div
                class='hidden flex-col w-full items-center mt-4 gap-2 flex-grow md:flex md:flex-row md:w-auto md:mt-0'
            >
                <a
                    href='/proyectos'
                    class={currentPath === 'proyectos'
                        ? 'active content'
                        : 'content'}
                >
                    Proyectos
                </a>

                <a
                    href='/recursos'
                    class={currentPath === 'recursos'
                        ? 'active content'
                        : 'content'}
                >
                    Recursos
                </a>
                <ProfileLink
                    href='https://github.com/daviardev'
                    target='_blank'
                >
                    <svg
                        stroke='currentColor'
                        fill='currentColor'
                        stroke-width='0'
                        viewBox='0 0 512 512'
                        height='1em'
                        width='1em'
                        xmlns='http://www.w3.org/2000/svg'
                    >
                        <path
                            d='M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z'
                        ></path>
                    </svg>
                     Mi perfil
                </ProfileLink>
            </div>

            <div class='flex-[1]'>
                <div class='flex justify-end'>
                    <div class='inline-block transform-none opacity-100'>
                        <button
                            type='button'
                            class='inline-flex items-center justify-center relative align-middle outline-offset-2 rounded-md font-semibold h-10 min-w-[2.5rem] text-base text-white p-0 pe-4 ps-4 bg-[#805adc]'
                        >
                            <svg
                                viewBox='0 0 24 24'
                                focusable='false'
                                fill='currentColor'
                                class='inline-flex leading-4 flex-shrink-0 align-middle'
                            >
                                <path
                                    fill='currentColor'
                                    d='M21.4,13.7C20.6,13.9,19.8,14,19,14c-5,0-9-4-9-9c0-0.8,0.1-1.6,0.3-2.4c0.1-0.3,0-0.7-0.3-1 c-0.3-0.3-0.6-0.4-1-0.3C4.3,2.7,1,7.1,1,12c0,6.1,4.9,11,11,11c4.9,0,9.3-3.3,10.6-8.1c0.1-0.3,0-0.7-0.3-1 C22.1,13.7,21.7,13.6,21.4,13.7z'
                                ></path>
                            </svg>
                        </button>
                    </div>

                    <div class='ml-2 inline-block md:hidden'>
                        <button
                            id='toggle-button'
                            type='button'
                            class='flex items-center justify-center h-10'
                        >
                            <label class='hamburger'>
                                <input type='checkbox' class='hidden' />
                                <svg viewBox='0 0 32 32'>
                                    <path
                                        class='line line-top-bottom'
                                        d='M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22'
                                    ></path>
                                    <path class='line' d='M7 16 27 16'></path>
                                </svg>
                            </label>
                        </button>
                        <div
                            id='menu'
                            class='absolute z-10 hidden'>
                            <div
                                class='bg-white shadow-sm text-inherit min-w-[14rem] pt-2 pb-2 rounded-md fixed right-3 top-14'
                            >
                                <a
                                    href='/'
                                    class='w-100 flex items-center text-start pt-1.5 pb-1.5 ps-3 pe-3 transition-colors hover:bg-gray-100'
                                >
                                    Inicio
                                </a>
                                <a
                                    href='/proyectos'
                                    class='w-100 flex items-center text-start pt-1.5 pb-1.5 ps-3 pe-3 transition-colors hover:bg-gray-100'
                                >
                                    Proyectos
                                </a>
                                <a
                                    href='/recursos'
                                    class='w-100 flex items-center text-start pt-1.5 pb-1.5 ps-3 pe-3 transition-colors hover:bg-gray-100'
                                >
                                    Recursos
                                </a>
                                <a
                                    href='https://github.com/daviardev'
                                    class='w-100 gap-1 flex items-center text-start pt-1.5 pb-1.5 ps-3 pe-3 transition-colors hover:bg-gray-100'
                                >
                                    <svg
                                        stroke='currentColor'
                                        fill='currentColor'
                                        stroke-width='0'
                                        viewBox='0 0 512 512'
                                        height='1em'
                                        width='1em'
                                        xmlns='http://www.w3.org/2000/svg'
                                    >
                                        <path
                                            d='M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z'
                                        ></path>
                                    </svg>
                                     Mi perfil
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>

<style>
    @tailwind components;

    .content {
        @apply p-2 bg-transparent text-[#202023] hover:underline inline-flex;
    }

    .active {
        background-color: #88ccca;
    }

    .hamburger {
        cursor: pointer;
    }

    .hamburger svg {
        height: 2em;
        transition: transform 250ms cubic-bezier(.4, 0, .2, 1);
    }

    .line {
        fill: none;
        stroke: black;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 1.3;
        transition:
            stroke-dasharray 250ms cubic-bezier(.4, 0, .2, 1),
            stroke-dashoffset 250ms cubic-bezier(.4, 0, .2, 1);
    }

    .line-top-bottom {
        stroke-dasharray: 12 63;
    }

    .hamburger input:checked + svg {
        transform: rotate(-45deg);
    }

    .hamburger input:checked + svg .line-top-bottom {
        stroke-dasharray: 20 300;
        stroke-dashoffset: -32.42;
    }
</style>

<script>
    const toggleButton = document.querySelector('.hamburger')
    const menu = document.getElementById('menu')

    const ToggleMenu = () => {
        menu.classList.toggle('block')
        menu.classList.toggle('hidden')

        const menuState = menu.classList.contains('block') ? 'open' : 'close'
    }
</script>