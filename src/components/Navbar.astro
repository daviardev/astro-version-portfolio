---
import Logo from './Logo.astro'

import ProfileLink from './ProfileLink.astro'

const pathName = new URL(Astro.request.url).pathname
const currentPath = pathName.slice(1)
---

<header>
    <nav
        class='fixed w-full bg-[rgba(255,255,255,0.25)] backdrop-blur-[10px] z-20'
    >
        <div
            class='w-full ms-auto me-auto ps-4 pe-4 flex p-2 max-w-3xl flex-wrap justify-between'
        >
            <div class='flex items-center mr-5'>
                <h1
                    class='font-bold items-center text-2xl leading-[1.33] tracking-tighter'
                >
                    <Logo />
                </h1>
            </div>
            <div
                class='hidden flex-col w-full items-center mt-4 gap-2 flex-grow md:flex md:flex-row md:w-auto md:mt-0'
            >
                <a
                    href='/proyectos'
                    class={currentPath === 'proyectos'
                        ? 'active content'
                        : 'content'}
                >
                    Proyectos
                </a>

                <a
                    href='/recursos'
                    class={currentPath === 'recursos'
                        ? 'active content'
                        : 'content'}
                >
                    Recursos
                </a>
                <ProfileLink
                    href='https://github.com/daviardev'
                    target='_blank'
                >
                    <svg
                        stroke='currentColor'
                        fill='currentColor'
                        stroke-width='0'
                        viewBox='0 0 512 512'
                        height='1em'
                        width='1em'
                        xmlns='http://www.w3.org/2000/svg'
                    >
                        <path
                            d='M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z'
                        ></path>
                    </svg>
                     Mi perfil
                </ProfileLink>
            </div>

            <div class='flex-[1]'>
                <div class='flex justify-end'>
                    <div class='inline-block transform-none opacity-full'>
                        <button
                            class='inline-flex items-center justify-center relative align-middle outline-offset-2 rounded-md font-semibold h-10 min-w-[2.5rem] text-base text-white p-0 pe-4 ps-4 bg-[#805adc]'
                        >
                            <svg
                                viewBox='0 0 24 24'
                                focusable='false'
                                fill='currentColor'
                                class='inline-flex leading-4 flex-shrink-0 align-middle'
                            >
                                <path
                                    fill='currentColor'
                                    d='M21.4,13.7C20.6,13.9,19.8,14,19,14c-5,0-9-4-9-9c0-0.8,0.1-1.6,0.3-2.4c0.1-0.3,0-0.7-0.3-1 c-0.3-0.3-0.6-0.4-1-0.3C4.3,2.7,1,7.1,1,12c0,6.1,4.9,11,11,11c4.9,0,9.3-3.3,10.6-8.1c0.1-0.3,0-0.7-0.3-1 C22.1,13.7,21.7,13.6,21.4,13.7z'
                                ></path>
                            </svg>
                        </button>
                    </div>
                    <div class='ml-2 inline-block md:hidden'>
                        <label class='popup'>
                            <input type='checkbox' />
                            <div class='burger' tabindex='0'>
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <nav
                                class='popup-window bg-white shadow-sm text-inherit min-w-[14rem] pt-2 pb-2 rounded-md fixed right-3 top-[3.8rem]'
                            >
                                <ul>
                                    <li>
                                        <a
                                            href='/'
                                            class={currentPath === ''
                                                ? 'active links-nav'
                                                : 'links-nav'}
                                        >
                                            Inicio
                                        </a>
                                    </li>
                                    <li>
                                        <a
                                            href='/proyectos'
                                            class={currentPath === 'proyectos'
                                                ? 'active links-nav'
                                                : 'links-nav'}
                                        >
                                            Proyectos
                                        </a>
                                    </li>
                                    <li>
                                        <a
                                            href='/recursos'
                                            class={currentPath === 'recursos'
                                                ? 'active links-nav'
                                                : 'links-nav'}
                                        >
                                            Recursos
                                        </a>
                                    </li>
                                    <li>
                                        <a
                                            href='https://github.com/daviardev'
                                            target='_blank'
                                            class='w-full gap-1 flex items-center text-start pt-1.5 pb-1.5 ps-3 pe-3 transition-colors hover:underline'
                                        >
                                            <svg
                                                stroke='currentColor'
                                                fill='currentColor'
                                                stroke-width='0'
                                                viewBox='0 0 512 512'
                                                height='1em'
                                                width='1em'
                                                xmlns='http://www.w3.org/2000/svg'
                                            >
                                                <path
                                                    d='M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z'
                                                ></path>
                                            </svg>
                                             Mi perfil
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>

<style>
    @tailwind components;

    .content {
        @apply p-2 bg-transparent text-[#202023] hover:underline inline-flex;
    }

    .links-nav {
        @apply w-full flex items-center text-start pt-1.5 pb-1.5 ps-3 pe-3 transition-colors hover:underline;
    }

    .active {
        background-color: #88ccca;
    }

    .popup {
        --burger-line-width: 1.125em;
        --burger-line-height: 0.125em;
        --burger-offset: 0.625em;
        --burger-bg: rgba(0, 0, 0, 0.15);
        --burger-color: #333;
        --burger-line-border-radius: 0.1875em;
        --burger-diameter: 2.125em;
        --burger-line-transition: 0.3s;
        --burger-transition: all 0.1s ease-in-out;

        --nav-default-scale: 0.8;
        --nav-active-scale: 1;
    }

    .popup input {
        display: none;
        border: none;
    }

    .burger {
        display: flex;
        position: relative;
        align-items: center;
        justify-content: center;
        width: var(--burger-diameter);
        height: var(--burger-diameter);
        cursor: pointer;
        overflow: hidden;
        transition: var(--burger-transition);
    }

    .burger span {
        height: var(--burger-line-height);
        width: var(--burger-line-width);
        background: var(--burger-color);
        border-radius: var(--burger-line-border-radius);
        position: absolute;
        transition: var(--burger-line-transition);
    }

    .burger span:nth-child(1) {
        top: var(--burger-offset);
    }

    .burger span:nth-child(2) {
        bottom: var(--burger-offset);
    }

    .burger span:nth-child(3) {
        top: 50%;
        transform: translateY(-50%);
    }

    .popup-window {
        transform: scale(var(--nav-default-scale));
        visibility: hidden;
        transition: var(--burger-transition);
    }

    .popup input:checked + .burger span:nth-child(1) {
        top: 50%;
        transform: translateY(-50%) rotate(45deg);
    }

    .popup input:checked + .burger span:nth-child(2) {
        bottom: 50%;
        transform: translateY(50%) rotate(-45deg);
    }

    .popup input:checked + .burger span:nth-child(3) {
        transform: translateX(
            calc(var(--burger-diameter) * -1 - var(--burger-line-width))
        );
    }

    .popup input:checked ~ nav {
        transform: scale(var(--nav-active-scale));
        visibility: visible;
        opacity: 1;
    }
</style>
